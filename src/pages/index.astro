---
import Layout from '../layouts/Layout.astro';
import PokemonCard from '../components/PokemonCard.astro';
import { getPokemonList, getPokemon } from '../lib/pokemonApi';

export const prerender = true; 

const { results: pokemonList } = await getPokemonList(100);
const pokemons = await Promise.all(pokemonList.map(p => getPokemon(p.name)));
---

<Layout title="Pokédex">

  <main class="container mx-auto p-4">
    <h1 class="text-3xl font-bold mb-4">Pokédex</h1>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
      {pokemons.map((pokemon) => (
        <PokemonCard pokemon={pokemon} />
      ))}
    </div>
  </main>
</Layout>